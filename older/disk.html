<!DOCTYPE html>
<title>Painted disks</title>
<meta name="format-detection" content="telephone=no">
<meta charset=utf-8>
<meta name=viewport content="width=device-width, initial-scale=1.0">
<link rel=stylesheet href='common.css'>
<script src='../index.js'></script>
<script src='../platonic.js'></script>
<script src='common.js'></script>
<hedron-p face="20" stroke=".02"></hedron-p> 
<style>
table {
    perspective:200em;
    margin:auto;
    --width:4.5rem;width:var(--width);
    --height:2.5rem;height:calc(var(--height)*12);
    --extend:calc(var(--width)*var(--rows)/2/3);
    perspective-origin:50% 150%;
    -webkit-perspective-origin:50% 150%;
    cursor:grab;
}
tbody {
    --spin:calc(360deg/var(--rows)*(var(--checked) - 1)); 
    transform:translateZ(calc(-1*var(--extend))) rotateY(calc(-1*var(--spin)));
    transform-style:preserve-3d;
    position:relative;
    will-change:transform;transition:1s;
}
tr {
    --position:calc(360deg/var(--rows)*(var(--index) - 1));
    transform:rotateY(var(--position)) translateZ(var(--extend));
    position:absolute;
    width:100%;
    will-change:transform;transition:1s;
    user-select:none;-webkit-user-select:none;
}
td {
    display:flex;justify-content:center;align-items:center;
    height:var(--height);
    margin:0.2em 0;
    border:0.1em solid var(--c);
    color:var(--c);
    background:white;
    position:relative;
    z-index:0;
    font-size:1.3em;white-space:nowrap;
}
td:empty {
    border-color:silver;
    color:lightgray;
}
td.got {
    background:var(--c);
    color:white;
}
td:nth-child(1) {--c:sienna;}
td:nth-child(2) {--c:gold;}
td:nth-child(3) {--c:forestgreen;}
td:nth-child(4) {--c:dodgerblue;}
td:nth-child(5) {--c:slateblue;}
td:nth-child(6) {--c:darkorchid;}
td:nth-child(7) {--c:crimson;}
td:nth-child(8) {--c:black;}

td::before {
    content:attr(title);
    position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
    font-size:2rem;font-style:italic;
    z-index:-1;
}
dl::before {
    content:'åœ–ä¾‹\A';
    white-space:pre;
}
dd,dt {
    display:inline;
}
dd {
    margin-left:1em;
}
</style>

<main>
    <article>
        <dl>
            <dt>ğŸ°<dd>ã‚³ãƒ­ã‚³ãƒ­é›œèªŒæŠ½é¸ï¼ˆ100 / 321 / 1000 åï¼‰<br>
            <dt>ğŸ¥‡<dd>G1 å¤§æœƒç¬¬ä¸€åè³å“<br>
            <dt>ğŸ¥‰<dd>G1 å¤§æœƒç¬¬ä¸‰åè³å“<br>
            <dt>ğŸ¥ˆ<dd>G4 å¤§æœƒç¬¬äºŒåè³å“<br>
            <dt>ğŸ«<dd>ã¿ã‚“ãªã®ãã˜çåˆ¸è³<br>
            <dt>ğŸˆ‚ï¸<dd>ã‚³ãƒ­ã‚³ãƒ­é›œèªŒå…¨å“¡ service æ‡‰å‹Ÿå“<br>
            <dt>ğŸ’»<dd>ã‚³ãƒ­ã‚³ãƒ­ç¶²åº—å•†å“<br>
            <dt>ğŸ›’<dd>B- å•†å“<br>
            <dt>ğŸ›ï¸<dd>BBG-/BA- å•†å“<br>
            <dt>ğŸ®<dd>éŠæˆ²è»Ÿä»¶åŒç¶‘å“<br>
            <dt>ğŸ<dd>è³¼ç‰©æ»¿é¡è´ˆå“<br>
        </dl>
    </article>
    <table>
        <tbody style="--checked:1"></tbody>
    </table>
</main>
<script>
(() => {
    const disks = ['00','0','1','1â€²','2','3','4','5','6','7','8','8â€²','10','11','12','13'];
    Q('tbody').append(...[
        /*Br   Go/Y    G    B       PB   P     R      Bl*/
        [0   ,'ğŸ›ï¸'   ,0   ,'ğŸ°ğŸ›ï¸' ,0   ,0    ,'ğŸ°ğŸ›ï¸','ğŸ’»'  ], /*00*/
        [0   ,'ğŸ›ï¸ğŸ¥ˆ' ,0   ,0      ,0   ,'ğŸˆ‚ï¸','ğŸ°ğŸ’»','ğŸ°ğŸ’»' ], /*0*/
        [0   ,'ğŸ°'   ,0   ,0      ,0   ,0    ,0     ,0       ], /*1*/
        [0   ,0      ,0   ,0      ,0   ,0    ,'ğŸ›ï¸'  ,0       ], /*1'*/
        [0   ,'ğŸ¥ˆ'   ,0   ,'ğŸ’»'   ,0   ,0    ,0     ,0       ], /*2*/
        [0   ,0      ,0   ,'ğŸ®'   ,0   ,0    ,'ğŸ›’'  ,0       ], /*3*/
        [0   ,0      ,0   ,'ğŸ’»'   ,0   ,0    ,'ğŸ›’'  ,'ğŸ¥ˆğŸ›ï¸ğŸ’»'], /*4*/
        [0   ,'ğŸ'   ,0   ,0      ,0   ,0    ,0     ,0       ], /*5*/
        ['ğŸ¥‰','ğŸ¥‡'   ,0   ,'ğŸ°'   ,0   ,'ğŸ’»' ,'ğŸ°'  ,0      ], /*6*/
        [0   ,'ğŸ›ï¸'   ,'ğŸ›’',0      ,0   ,0    ,'ğŸ°ğŸ','ğŸˆ‚ï¸'   ], /*7*/
        [0   ,0      ,0   ,'ğŸ«ğŸˆ‚ï¸',0   ,'ğŸ°' ,'ğŸ«'  ,0       ], /*8*/
        [0   ,'ğŸ°'   ,0   ,0      ,0   ,0    ,0     ,'ğŸ’»'    ], /*8'*/
        [0   ,'ğŸ°ğŸˆ‚ï¸','ğŸ›ï¸','ğŸ°'   ,0   ,0    ,'ğŸˆ‚ï¸' ,0        ], /*10*/
        ['ğŸ¥‰','ğŸ¥‡'   ,0   ,'ğŸ°ğŸ’»' ,0   ,0    ,'ğŸ›’'  ,0      ], /*11*/
        [0   ,0      ,0   ,'ğŸ›’'   ,'ğŸ’»',0    ,0     ,0       ], /*12*/
        [0   ,'ğŸ°'   ,0   ,0      ,0   ,0    ,0     ,0       ]  /*13*/
    ].map( (tr, i) => E('tr', tr.map( td => E('td', td || '', {title: disks[i]}) )) ));

    Q('tr', (tr, i) => new E.prop({'--index': i+1}).apply(tr));
    const table = Q('table');
    new E.prop({'--rows': table.Q('tr').length}).apply(table);

    let got = JSON.parse(cookie.got || null) || [];
    got.forEach(coor => {
        let [r, d] = coor.split(',').map(n => parseInt(n));
        Q(`tr:nth-child(${r+1}) td:nth-child(${d+1})`).classList.add('got');
    });
    Q('td', td => td.onclick = () => {
        if (!td.innerText) return;
        let coor = [...td.parentElement.parentElement.children].indexOf(td.parentElement) + ',' + [...td.parentElement.children].indexOf(td);
        got = td.classList.contains('got')? got.filter(c => c != coor) : [...got, coor];
        td.classList.toggle('got');
        document.cookie = `got=${JSON.stringify(got)};path=/;max-age=888888`;
    });

    table.spin = n => {
        let cylinder = Q('tbody');
        Q('tr', tr => tr.removeAttribute('class'));
        let k = new E(cylinder).get('--checked') + n;
        new E.prop({'--checked': k}).apply(cylinder);
    };
    table.spin(0);

    let [start, end] = [0, 0];

    table.onpointerdown = ev => start = ev.clientX;
    document.onpointerup = () => start = 0;
    table.onpointermove = ev => {
        if (!start) return;
        end = ev.clientX;
        let diff = - parseInt((end - start) / 50);
        if (Math.abs(diff) >= 1) {
            table.spin(diff);
            start = end;
        }
    };
})();
</script>
<!--
B: r
C: b
D: b
F: y
G: bl
H: r y b
I: r
J/M/P: y y+
K: bg
N: b y
O: r
Q: p
R: y
S: r b
T: b
V: y
W: y bl
Y: bl
Z: b
alpha: r y b p
beta: r y b p
omega: r y bg bl
Ar: p r
Bl: y
Gg: r
Hr: r
Kr: b
Lg: y
St: y
Vn: r
Wh: y
-->
